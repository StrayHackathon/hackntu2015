<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>地圖</title>
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 100%;
      }
    </style>
    <script  type="text/javascript" src="jquery-1.11.3.min.js"></script>
    <script  type="text/javascript" src="explore.js"></script>
    <script type="text/javascript">
		var btns = {
			"#hospitals" : hospitals,
			"#parks": parks,
			"#restaurants": restaurants,
			"#friends" : friends
		};

		function onMarkBtnClicked() {
			var id = "#" + $(this).attr("id");
			markSites(window.map, btns[id]);
		}

		var tracking = false;
		function onTrackPathClicked() {
			if(false == tracking) {
				startTrackingPath();
				tracking = true;
				$(this).text("結束紀錄");
			}
			else {
				path = stopTrackingPath();
				tracking = false;
				$(this).text("紀錄路徑");
				path_str = "";
				for(var i = 0; i < path.length; ++i) {
					crd = path[i];
					path_str += "{" + crd.latitude + ", " + crd.longitude + "}, ";
				}
				alert(path_str);
			}
		}

		$( document ).ready(function() {
			for(var id in btns) {
				$(id).on("click", onMarkBtnClicked);
			}

			$("#move_to").on("click", function() {
				moveToAddress(window.map, $("#address").val());
			});

			$("#current_location").on("click", function() {
				centerOnCurrentLocation(window.map);
			});

			$("#track_path").on("click", onTrackPathClicked);

		});
    </script>
  </head>
  <body>
	  尋找：
	  <button id="hospitals">醫院</button>
	  <button id="parks">公園</button>
	  <button id="restaurants">寵物餐廳</button>
	  <button id="friends">朋友</button>
	  <br />
	  <input id="address" />
	  <button id="move_to">移到</button>
	  <button id="current_location">目前位置</button>
	  <button id="track_path">紀錄路徑</button>
    <div id="map"></div>
    <script async defer
        src="https://maps.googleapis.com/maps/api/js?v=3&key=AIzaSyBm3Vv7k-8DiE_uBvptymYypVtYlGnqF8g&signed_in=true&callback=initMap"></script>
  </body>
</html>

